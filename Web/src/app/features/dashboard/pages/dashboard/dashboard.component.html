<div class="dashboard-container">
    <h1>Dashboard Overview</h1>

    <!-- Loading State -->
    <div *ngIf="!stats && !hasError" class="loading-state">
        <mat-icon class="loading-icon">analytics</mat-icon>
        <p>Loading dashboard statistics...</p>
    </div>

    <!-- Error State -->
    <div *ngIf="hasError && !isLoading" class="error-state">
        <mat-icon color="warn">error_outline</mat-icon>
        <h3>Unable to Load Dashboard</h3>
        <p>{{ errorMessage }}</p>
        <button mat-raised-button color="primary" (click)="loadStats()">
            <mat-icon>refresh</mat-icon> Retry
        </button>
    </div>

    <div *ngIf="stats" class="stats-grid">
        <!-- Total Orders Card -->
        <mat-card class="stat-card">
            <mat-card-header>
                <div mat-card-avatar class="icon-bg primary">
                    <mat-icon>shopping_cart</mat-icon>
                </div>
                <mat-card-title>{{ stats.total_orders }}</mat-card-title>
                <mat-card-subtitle>Total Orders</mat-card-subtitle>
            </mat-card-header>
        </mat-card>

        <!-- Completed Orders Card -->
        <mat-card class="stat-card">
            <mat-card-header>
                <div mat-card-avatar class="icon-bg success">
                    <mat-icon>check_circle</mat-icon>
                </div>
                <mat-card-title>{{ stats.orders_by_status.completed }}</mat-card-title>
                <mat-card-subtitle>Completed</mat-card-subtitle>
            </mat-card-header>
        </mat-card>

        <!-- Pending Orders Card -->
        <mat-card class="stat-card">
            <mat-card-header>
                <div mat-card-avatar class="icon-bg warn">
                    <mat-icon>access_time</mat-icon>
                </div>
                <mat-card-title>{{ stats.orders_by_status.pending }}</mat-card-title>
                <mat-card-subtitle>Pending</mat-card-subtitle>
            </mat-card-header>
        </mat-card>

        <!-- Active Clients Card -->
        <mat-card class="stat-card">
            <mat-card-header>
                <div mat-card-avatar class="icon-bg info">
                    <mat-icon>people</mat-icon>
                </div>
                <mat-card-title>{{ stats.active_clients }}</mat-card-title>
                <mat-card-subtitle>Active Clients</mat-card-subtitle>
            </mat-card-header>
        </mat-card>
    </div>

    <!-- Chart Section -->
    <mat-card class="chart-card" *ngIf="stats && stats.monthly_activity?.length">
        <mat-card-header>
            <mat-card-title>Activity Overview</mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <div class="chart-container">
                <canvas #activityChart></canvas>
            </div>
        </mat-card-content>
    </mat-card>
</div>
